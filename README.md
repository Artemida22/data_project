# ETL Pipeline with Airflow, PostgreSQL and Docker
Архитектура проекта:
- ![image](https://github.com/user-attachments/assets/9bea80a6-82fe-429a-8097-5268b32e545c)
  
Этот проект демонстрирует ETL-пайплайн с использованием:
- Apache Airflow для оркестрации
- PostgreSQL для хранения данных
- Docker для контейнеризации

## Быстрый старт
- Необходимо создать директории согласно архитектуре проекта
- Добавьте соединение с postgres в Airflow:
  - Admin -> connections -> "найти соединение с posctgres" и изменить его под вашу систему
### Требования
- Docker
- Docker Compose

### Файлы .csv лежат в архиве csv.rar 
- ft_balance_f.csv      
- ft_posting_f.csv         
- md_account_d.csv         
- md_currency_d.csv         
- md_exchange_rate_d.csv    
- md_ledger_account_s.csv   


### Описание принципа работы:
- Система представляет собой контейнеризированный ETL-пайплайн, управляемый Apache Airflow, который выполняет следующие операции:
  - Извлекает данные из CSV-файлов
  - Трансформирует данные согласно бизнес-правилам
  - Загружает очищенные данные в PostgreSQL
  - Логирует все этапы выполнения в специальную таблицу

- Ключевые компоненты (Компонент-Назначение-Файлы):
  - Оркестратор - Управление ETL-процессом - manual_etl_dag.py
  - ETL Ядро - Основная логика извлечения, трансформации и загрузки - Etl_pipeline.py
  - Конфигурация - Централизованное хранение параметров	- config.py
  - Инфраструктура -	Контейнеризация сервисов	- docker-compose.yml
 
### Последовательность выполнения:
- Запуск DAG через Airflow
  -Пользователь запускает manual_etl_pipeline в Airflow
- Обработка таблиц
  - ![image](https://github.com/user-attachments/assets/11a00f5a-802b-4625-9df6-85720709ab00)

- Детали этапов обработки:
  - Extract:
    - Автоматическое определение кодировки файла
    - Чтение CSV с разделителем ";"
  - Transform:
    - Удаление дубликатов
    - Обработка NULL-значений
    - Переименование колонок
    - Преобразование дат
    - Валидация обязательных полей
  - Load:
    - Пакетная загрузка через to_sql()
    - Очистка целевой таблицы перед загрузкой (для ft_posting_f)
    - Транзакционное выполнение
